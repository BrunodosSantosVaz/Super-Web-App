<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teste de Notifica√ß√µes</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 600px;
            margin: 50px auto;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        .container {
            background: rgba(255, 255, 255, 0.1);
            padding: 30px;
            border-radius: 15px;
            backdrop-filter: blur(10px);
        }
        h1 {
            text-align: center;
            margin-bottom: 30px;
        }
        button {
            width: 100%;
            padding: 15px;
            margin: 10px 0;
            font-size: 16px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            background: rgba(255, 255, 255, 0.9);
            color: #333;
            font-weight: bold;
            transition: all 0.3s ease;
        }
        button:hover {
            background: white;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }
        button:active {
            transform: translateY(0);
        }
        #status {
            margin-top: 20px;
            padding: 15px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            min-height: 60px;
        }
        .success {
            color: #4ade80;
        }
        .error {
            color: #f87171;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîî Teste de Notifica√ß√µes</h1>

        <button onclick="requestPermission()">1. Solicitar Permiss√£o</button>
        <button onclick="sendSimpleNotification()">2. Notifica√ß√£o Simples</button>
        <button onclick="sendNotificationWithBody()">3. Notifica√ß√£o com Corpo</button>
        <button onclick="sendMultipleNotifications()">4. M√∫ltiplas Notifica√ß√µes</button>
        <button onclick="checkPermission()">Verificar Status de Permiss√£o</button>

        <div id="status">
            <p>Status: Aguardando a√ß√£o...</p>
        </div>
    </div>

    <script>
        function updateStatus(message, isError = false) {
            const status = document.getElementById('status');
            status.innerHTML = `<p class="${isError ? 'error' : 'success'}">${message}</p>`;
        }

        function checkPermission() {
            if (!("Notification" in window)) {
                updateStatus("‚ùå Este navegador n√£o suporta notifica√ß√µes", true);
                return;
            }

            const permission = Notification.permission;
            let message = "";

            switch(permission) {
                case "granted":
                    message = "‚úÖ Permiss√£o concedida! Pode enviar notifica√ß√µes.";
                    break;
                case "denied":
                    message = "‚ùå Permiss√£o negada. Voc√™ bloqueou as notifica√ß√µes.";
                    break;
                case "default":
                    message = "‚ö†Ô∏è Permiss√£o n√£o solicitada ainda. Clique em 'Solicitar Permiss√£o'.";
                    break;
            }

            updateStatus(message);
        }

        async function requestPermission() {
            if (!("Notification" in window)) {
                updateStatus("‚ùå Este navegador n√£o suporta notifica√ß√µes", true);
                return;
            }

            try {
                const permission = await Notification.requestPermission();

                if (permission === "granted") {
                    updateStatus("‚úÖ Permiss√£o concedida! Agora voc√™ pode receber notifica√ß√µes.");
                    // Envia uma notifica√ß√£o de teste
                    new Notification("Permiss√£o Concedida!", {
                        body: "Voc√™ agora receber√° notifica√ß√µes deste webapp.",
                        icon: "https://via.placeholder.com/128"
                    });
                } else if (permission === "denied") {
                    updateStatus("‚ùå Permiss√£o negada. As notifica√ß√µes foram bloqueadas.", true);
                } else {
                    updateStatus("‚ö†Ô∏è Permiss√£o n√£o foi concedida.", true);
                }
            } catch (error) {
                updateStatus("‚ùå Erro ao solicitar permiss√£o: " + error.message, true);
            }
        }

        function sendSimpleNotification() {
            if (Notification.permission !== "granted") {
                updateStatus("‚ùå Voc√™ precisa conceder permiss√£o primeiro!", true);
                return;
            }

            try {
                new Notification("Ol√°! üëã");
                updateStatus("‚úÖ Notifica√ß√£o simples enviada!");
            } catch (error) {
                updateStatus("‚ùå Erro ao enviar notifica√ß√£o: " + error.message, true);
            }
        }

        function sendNotificationWithBody() {
            if (Notification.permission !== "granted") {
                updateStatus("‚ùå Voc√™ precisa conceder permiss√£o primeiro!", true);
                return;
            }

            try {
                new Notification("Super WebApp", {
                    body: "Esta √© uma notifica√ß√£o de teste com corpo de texto. As notifica√ß√µes est√£o funcionando perfeitamente! üéâ",
                    icon: "https://via.placeholder.com/128",
                    tag: "test-notification"
                });
                updateStatus("‚úÖ Notifica√ß√£o com corpo enviada!");
            } catch (error) {
                updateStatus("‚ùå Erro ao enviar notifica√ß√£o: " + error.message, true);
            }
        }

        function sendMultipleNotifications() {
            if (Notification.permission !== "granted") {
                updateStatus("‚ùå Voc√™ precisa conceder permiss√£o primeiro!", true);
                return;
            }

            try {
                const notifications = [
                    { title: "Primeira Notifica√ß√£o", body: "Esta √© a primeira notifica√ß√£o 1Ô∏è‚É£" },
                    { title: "Segunda Notifica√ß√£o", body: "Esta √© a segunda notifica√ß√£o 2Ô∏è‚É£" },
                    { title: "Terceira Notifica√ß√£o", body: "Esta √© a terceira notifica√ß√£o 3Ô∏è‚É£" }
                ];

                notifications.forEach((notif, index) => {
                    setTimeout(() => {
                        new Notification(notif.title, {
                            body: notif.body,
                            icon: "https://via.placeholder.com/128",
                            tag: `multi-notif-${index}`
                        });
                    }, index * 1000); // 1 segundo de intervalo entre cada uma
                });

                updateStatus("‚úÖ Enviando 3 notifica√ß√µes com intervalo de 1 segundo...");
            } catch (error) {
                updateStatus("‚ùå Erro ao enviar notifica√ß√µes: " + error.message, true);
            }
        }

        // Verifica o status ao carregar a p√°gina
        window.onload = checkPermission;
    </script>
</body>
</html>
